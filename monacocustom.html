<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lunar DeV Editor</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; }

    body {
      background: #18181b;
      color: #fff;
      font-family: 'JetBrains Mono', monospace;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* ===== TAB BAR ===== */
    #tab-bar {
      height: 42px;
      background: linear-gradient(135deg, #221f29, #1b1920);
      display: flex;
      align-items: center;
      padding: 0 10px;
      gap: 8px;
      border-bottom: 1px solid #2d2935;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.6);
      animation: fadeDown 0.6s ease;
    }

    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .tab {
      position: relative;
      height: 28px;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      color: #d3c8ff;
      cursor: pointer;
      transition: all 0.3s ease;
      background: linear-gradient(145deg, #2b2636, #201b29);
      border-top-left-radius: 10px;
      border-bottom-right-radius: 10px;
      border-top-right-radius: 0;
      border-bottom-left-radius: 0;
      border: 1px solid #3d3550;
      box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.4);
      opacity: 0;
      transform: scale(0.8);
      animation: tabEnter 0.4s ease forwards;
    }

    @keyframes tabEnter {
      to { opacity: 1; transform: scale(1); }
    }

    .tab.active {
      background: linear-gradient(145deg, #7a5cff, #6040d6);
      color: #fff;
      font-weight: 600;
      border-color: #9a84ff;
      box-shadow: 0 0 12px rgba(138, 86, 255, 0.4);
    }

    .tab:hover {
      filter: brightness(1.15);
      transform: translateY(-1px);
    }

    .tab .close {
      position: absolute;
      right: 8px;
      font-weight: bold;
      opacity: 0;
      transition: 0.2s;
      color: #ddd;
      font-size: 13px;
    }

    .tab:hover .close { opacity: 0.7; }

    #add-tab {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      border: 1px dashed #555;
      color: #777;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      cursor: pointer;
      transition: 0.25s;
    }

    #add-tab:hover {
      color: #fff;
      border-color: #8b5cf6;
      box-shadow: 0 0 8px rgba(124, 77, 255, 0.4);
      transform: scale(1.1);
    }

    /* ===== MONACO ===== */
    #editor-container {
      flex: 1;
      width: 100%;
      height: calc(100vh - 42px);
      border-top: 1px solid #26222e;
      animation: fadeUp 0.5s ease;
    }

    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Scrollbar Custom */
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-thumb {
      background: linear-gradient(145deg, #6f4ce2, #5736b0);
      border-radius: 5px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(145deg, #8b66ff, #6a45d1);
    }
    ::-webkit-scrollbar-track { background: #1e1b23; }

    /* Active Glow */
    .tab.active::after {
      content: "";
      position: absolute;
      bottom: -1px;
      left: 8px;
      right: 8px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #c9a9ff, transparent);
      border-radius: 2px;
      animation: glowPulse 2s infinite alternate;
    }

    @keyframes glowPulse {
      from { opacity: 0.6; }
      to { opacity: 1; }
    }
  </style>
</head>
<body>
  <div id="tab-bar">
    <div class="tab active" data-name="main.lua">main.lua <span class="close">√ó</span></div>
    <div id="add-tab">+</div>
  </div>

  <div id="editor-container"></div>

  <script>
    // üõ°Ô∏è Anti DevTools
    document.addEventListener('keydown', e => {
      if ((e.ctrlKey && e.shiftKey && e.key === 'I') || e.key === 'F12' || (e.ctrlKey && e.key === 'U')) {
        e.preventDefault(); e.stopPropagation(); alert('üö´ Developer Tools disabled in Lunar DeV.');
      }
    });
    document.addEventListener('contextmenu', e => e.preventDefault());

    // === MONACO ===
    require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs' } });
    let editor;
    const tabs = {};
    let currentTab = 'main.lua';

    require(['vs/editor/editor.main'], function () {
      monaco.editor.defineTheme('lunarDev', {
        base: 'vs-dark',
        inherit: true,
        rules: [
          { token: '', foreground: 'E0D7FF', background: '18181B' },
          { token: 'comment', foreground: '7E7C99', fontStyle: 'italic' },
          { token: 'keyword', foreground: 'C792EA' },
          { token: 'number', foreground: 'FFCB6B' },
          { token: 'string', foreground: 'A5FF90' },
          { token: 'identifier', foreground: 'E0D7FF' }
        ],
        colors: {
          'editor.background': '#18181B',
          'editor.lineHighlightBackground': '#221b35',
          'editorCursor.foreground': '#BB86FC',
          'editorLineNumber.foreground': '#5e5877',
          'editor.selectionBackground': '#3E3065',
          'scrollbarSlider.background': '#523A87AA',
          'scrollbarSlider.hoverBackground': '#6D4EDFAA',
          'editorIndentGuide.background': '#2a2a33',
          'editorGutter.background': '#18181B'
        }
      });

      editor = monaco.editor.create(document.getElementById('editor-container'), {
        value: "-- Lunar DeV Editor Online!\nprint('Welcome, Dev.')",
        language: "lua",
        theme: "lunarDev",
        fontSize: 14,
        fontFamily: "'JetBrains Mono', monospace",
        cursorSmoothCaretAnimation: true,
        smoothScrolling: true,
        minimap: { enabled: false },
        scrollBeyondLastLine: false,
        roundedSelection: true,
      });
      tabs[currentTab] = editor.getValue();
    });

    // ===== Tab System =====
    const tabBar = document.getElementById('tab-bar');
    const addTabBtn = document.getElementById('add-tab');

    tabBar.addEventListener('click', (e) => {
      const target = e.target.closest('.tab');
      if (!target) return;
      const tabName = target.getAttribute('data-name');

      // Close tab
      if (e.target.classList.contains('close')) {
        if (Object.keys(tabs).length > 1) {
          delete tabs[tabName];
          target.remove();
          const firstTab = document.querySelector('.tab');
          firstTab.classList.add('active');
          currentTab = firstTab.dataset.name;
          editor.setValue(tabs[currentTab]);
        }
        return;
      }

      if (editor && currentTab) tabs[currentTab] = editor.getValue();
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      target.classList.add('active');
      currentTab = tabName;
      editor.setValue(tabs[tabName] || '');
    });

    addTabBtn.addEventListener('click', () => {
      const newName = "file" + (Object.keys(tabs).length + 1) + ".lua";
      const tab = document.createElement('div');
      tab.className = 'tab';
      tab.dataset.name = newName;
      tab.innerHTML = `${newName} <span class="close">√ó</span>`;
      tabBar.insertBefore(tab, addTabBtn);
      tabs[newName] = "-- New file: " + newName + "\n";
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      currentTab = newName;
      editor.setValue(tabs[newName]);
    });

    // === H√†m t∆∞∆°ng t√°c C# ===
   function getText() {
  if (!editor) return '';

  let code = editor.getValue();

  // Ki·ªÉm tra n·∫øu code c√≥ ch·ª©a c√°c URL c·∫ßn thay th·∫ø
  const detectList = [
    /loadstring\(game:HttpGet\("https:\/\/github\.com\/ltseverydayyou\/uuuuuuu\/blob\/main\/UNC%20test\?raw=true"\)\)\(\)/gi,
    /loadstring\(game:HttpGet\("https:\/\/obj\.wearedevs\.net\/2\/scripts\/UNC%20Checker\.lua"\)\)\(\)/gi
  ];

  const replaceURL = `loadstring(game:HttpGet("https://github.com/windboltarc/NamingStandard/blob/main/UNCCheckEnv.lua?raw=true"))()`;

  // N·∫øu ph√°t hi·ªán URL c·∫ßn thay th√¨ t·ª± ƒë·ªông thay
  for (const regex of detectList) {
    if (regex.test(code)) {
      code = code.replace(regex, replaceURL);
    }
  }

  return code;
}


    function setText(code) {
      if (editor) editor.setValue(code);
    }
  </script>
</body>
</html>

